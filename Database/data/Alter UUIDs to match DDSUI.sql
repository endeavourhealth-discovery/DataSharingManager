
drop table if exists data_sharing_manager.dds_dsa_map;
create table data_sharing_manager.dds_dsa_map (
	dds_uuid char(36) not null,
	dsm_uuid char(36) null,
    ods_code varchar(20) not null
);

insert into data_sharing_manager.dds_dsa_map (dds_uuid, ods_code)
values
('001efa94-f2b6-4321-8e81-f751302ccb08', 'F86038'),
('0032e689-a540-4b7a-9c67-f7ecf72123ae', 'F83048'),
('0065057c-59cb-4a9a-98da-2bc0d51d2136', 'F86689'),
('00b3f7b7-f50f-451a-a0dd-9d779b94fd0f', 'F84669'),
('01fcfe94-5dfd-4951-b74d-129f874209b0', 'F84740'),
('02ce1d4b-6422-4b16-a8a4-3c839b0344c4', 'F84050'),
('03163dcf-3708-4c85-a5ae-458ec7f79593', 'F84676'),
('04adca23-bfb2-4ec4-b1b3-03537b392dbb', 'G85076'),
('0691d819-320a-4ac0-97ce-2faac0b79197', 'Y04273'),
('06b7e2f2-9554-42cd-a595-82cb29f485ba', 'F84117'),
('077099f6-be76-44f0-b988-8ea535189670', 'H85035'),
('07a267d3-189b-4968-b9b0-547de28edef5', 'F84711'),
('093020be-35f1-496f-8491-cc2c7a0b5006', 'F84119'),
('0b9601d1-f7ab-4f5d-9f77-1841050f75ab', 'F84014'),
('0bad1de0-a234-4c0b-b18e-9ddff30a0689', 'F86011'),
('0cb0c1ad-ec94-43f5-b501-32f18dc28f8a', 'F84083'),
('0d232971-e8c6-436a-80cf-bdaeba09ee7e', 'F86607'),
('0d649ff7-0749-4c94-adb1-69e3926d4310', 'F84074'),
('0fd2ff5d-2c25-4707-afe8-707e81a250b8', 'F84706'),
('12b2bb68-53cf-4f97-9924-d58d260f29d2', 'F84682'),
('14276da8-c344-4841-a36d-aa38940e78e7', 'F84092'),
('158251ca-0e1d-4471-8fae-250b875911e1', 'F84004'),
('160131e2-a5ff-49c8-b62e-ae499a096193', 'F84021'),
('16490f2b-62ce-44c6-9816-528146272340', 'F86650'),
('180505ee-2198-404f-99fa-39eb6d889305', 'F84657'),
('18fa1bed-b9a0-4d55-a0cc-dfc31831259a', 'F84070'),
('19cba169-d41e-424a-812f-575625c72305', 'F84672'),
('19ff6a03-25df-4e61-9ab1-4573cfd24729', 'F86078'),
('1b3d1627-f49e-4103-92d6-af6016476da3', 'F84115'),
('1b6ad973-ea84-4997-8795-4707d575eac6', 'F84077'),
('1e198fbb-c9cd-429a-9b50-0f124d0d825c', 'Y03049'),
('1ead3d98-6e3d-44e9-a37e-d786cc04c074', 'F84072'),
('20444fbe-0802-46fc-8203-339a36f52215', 'F84035'),
('21e27bf3-8071-48dd-924f-1d8d21f9216f', 'F84015'),
('23203e72-a3b0-4577-9942-30f7cdff358e', 'F84018'),
('2347899d-59be-4040-8b3d-cbb062d02e0c', 'F84741'),
('23be1f4a-68ec-4a49-b2ec-aa9109c99dcd', 'Y02585'),
('277c492a-91a3-46df-9c47-039e54cb809c', 'F86036'),
('2857dab0-9cb0-49ca-b76c-bba38b207a55', 'Y01291'),
('28623621-1f59-4f61-a246-55da6b8b9697', 'F84041'),
('2a4787fa-5106-4999-94ea-efcea4c82f68', 'F84660'),
('2b56033f-a9b4-4bab-bb53-c619bdb38895', 'F84079'),
('2ba26f2d-8068-4b77-8e62-431edfc2c2e2', 'F86701'),
('2d9bcc81-71a8-42ad-802f-49c923f92dac', 'F84685'),
('2ed89931-0ce7-49ea-88ac-7266b6c03be0', 'F84063'),
('30bc056b-9694-463e-b1be-1bad36967ef2', 'F84636'),
('35970e60-6c70-45e8-8ad4-32dcba7b29e9', 'F84716'),
('36f06244-e0f3-43d1-8829-653ddc9125c6', 'F84088'),
('3991b4f1-642d-46e5-9253-8ed2316d15ec', 'Y02973'),
('3abf8ded-f1b1-495b-9a2d-5d0223e33fa7', 'F84731'),
('3b0f6720-2ffd-4f8a-afcd-7e3bb311212d', 'F84016'),
('3ba6314f-e451-401f-8612-a15958217ca1', 'F84114'),
('3dd0a010-09c4-466e-b48a-07f26023c903', 'F84017'),
('3fa45839-e97d-4409-8de0-49800e46649e', 'F86679'),
('415b509a-cf39-45bc-9acf-7f982a00e159', 'F86712'),
('4221276f-a3b0-4992-b426-ec2d8c7347f2', 'F84668'),
('435a20fd-e1f3-4083-95b1-3e80688cb1f1', 'F84686'),
('43930b86-cca5-43d0-bedc-a2d53aa1082a', 'F84739'),
('49135d9e-c305-49b1-9478-e9b62cc5e6e7', 'F86045'),
('49c9d687-cebb-4219-b148-eecb90ec9805', 'RR8-CF'),
('4b59f504-2a68-47ec-bd0b-f8fb7c992430', 'Y01962'),
('4bdca725-9216-4972-b7ed-b66db0463980', 'F84111'),
('4f941391-8c94-4e26-aa76-ce86949de65e', 'F84025'),
('50188cdd-3557-4f8b-8824-f7fb210ca3ac', 'F84003'),
('511a88fe-549e-4d8e-908d-d86de8ac251a', 'G85053'),
('52387f13-02e6-40be-a081-716ccdb2c1a0', 'F84046'),
('55fdcbd0-9b2d-493a-b874-865ccc93a156', 'F84718'),
('56124545-d266-4da9-ba1f-b3a16edc7f31', 'F86705'),
('5c222aff-23f5-4a44-86a7-c92d0107a1aa', 'F86062'),
('5d17dbf3-ff61-4852-91ed-711602fa51b0', 'F84742'),
('5db649f1-6db4-4907-a748-9e52d15ac824', 'F84729'),
('5e3a4168-236c-4828-bd7e-8998682c6108', 'F84681'),
('611015eb-1d14-4091-b1a8-5c7e3ee49c69', 'F84749'),
('61b16b44-76e3-4c68-b6d8-bf23edaf33ed', 'F84055'),
('662f42d7-41ba-4fe1-9559-c75a16c4ffd2', 'F84601'),
('674bf5e5-5139-4a06-b724-496d60dbb3a3', 'F84118'),
('6826666c-d8a5-431c-8e64-97e65d664380', 'F84087'),
('6b24adbd-1b09-4fd2-a3fb-f58ffaeae114', 'F84719'),
('6c11453b-dbf8-4749-a0ec-ab705920e316', 'F84717'),
('6e254dd1-90a3-47da-83d4-b16f8d9aaa59', 'F84632'),
('718c4c34-657c-4c58-91da-06b9190e370b', 'F84093'),
('7303b236-4901-4e95-8180-33db59238d48', 'HRLYGRP'),
('735a474f-0e4f-422a-a7e3-74cfb412cf76', 'F84038'),
('741a3361-6110-49f9-b1a6-1de00f4747ec', 'F84124'),
('75e9a3ed-55b9-4bf5-b854-85722f75abd7', 'F84053'),
('76315943-5964-4cc8-a61b-15da1c2ca1c1', 'F84696'),
('769043a2-8086-407b-a522-bd3620cfa836', 'Y00403'),
('76dcb670-a86d-4dcf-9244-5c2f27f0e918', 'F84013'),
('787e25d5-d5d7-49c1-814b-4147640d160d', '29605'),
('78e307a6-02ec-4ced-bb6a-cd39d0e287c0', 'F84006'),
('7f8ca8a4-1d00-4a70-a19d-aa3a9c847d05', 'F84640'),
('807ee566-a014-4109-973e-864ff381b0ac', 'F84730'),
('80a8ce0e-f118-4d79-886c-bee38e48df34', 'F84747'),
('80ab2cef-7a2e-4593-9738-c0b966a275d4', 'F86001'),
('8186913b-67ab-41fa-b2a3-4b2b7932c1e4', 'F86073'),
('832c7571-1f80-4b77-8703-955156e62004', 'F84642'),
('833a8b01-cb4d-4365-a39a-8aa87fd131d4', 'F86664'),
('83ee8873-318d-4edd-b1ae-2b179346a58d', 'F84047'),
('8765ae7d-c763-45f2-a2f8-5af42f1cb304', 'F86639'),
('87fee819-2096-45d1-874e-dd341971bdb0', 'F84121'),
('88905f72-db9a-4ec2-9dae-905e066d25df', 'F84619'),
('898ac559-b3a8-4a0b-af6b-394f2c2bcd08', 'F84647'),
('8a4a57a8-d658-4d60-ab3d-2ead4b8ee439', 'F84677'),
('8a94470d-e8bb-4744-a1a4-94d1de7d4000', 'F84720'),
('8bfea7ff-1ac8-4fc5-adb8-463eb248244e', 'F84624'),
('8d3d2fe5-bd10-43ac-86f1-c36fe8625181', 'F86644a'),
('8fc1b046-2768-4c5f-8be6-4242dc2435f1', 'F84031'),
('93553ab0-2822-4a6f-9060-1ffbcc9829f4', 'F84635'),
('93872138-6412-4dc0-9db9-f8c882a596f0', 'F86700'),
('94376774-7ef5-4567-9040-6148faa82638', 'F84012'),
('94bac773-25db-402b-8199-f6c90cd37647', 'F84069'),
('962d6a9a-5950-47ac-9e16-ebee56f9507a', 'RQX'),
('96e72003-049e-4736-9be4-c167c82b90a4', 'Y02957'),
('996a3483-1e46-4457-812d-f020a89dc297', 'F84009'),
('9a0c760d-4b69-480d-a147-490fb96910d5', 'F84043'),
('9ab07a9c-a36d-4d7c-ade8-9fdd3f4e87cc', 'F86625'),
('9b489796-f711-4f48-8310-8714e957fb20', 'F86708'),
('9d1f8aa7-6e8b-48b6-ace7-faad6f1f8840', 'F84631'),
('9d511961-0d40-44ba-b0e4-c912007eb6e9', 'F86049'),
('9ea305f8-71c0-4b56-b482-56c94249c3e7', 'F84039'),
('a0a8df15-3abe-40d2-b6b6-93d4a09fbadd', 'F86627'),
('a0cd783d-9ca6-4afc-a4a7-088f19e8bb10', 'F84052'),
('a38167d8-0b12-48c8-ba58-c20efd013eea', 'F84694'),
('a3c5cd22-c638-452a-a10f-82677e85e0d4', 'Y02928'),
('a42315e7-2caa-42f3-81aa-719be5beeed5', 'F86666'),
('a473311a-0867-4765-8194-4c527a164016', 'Y01839'),
('a4af855c-76dc-4a4e-beee-1e59579d8571', 'F84054'),
('a90fd789-e8ab-4b4e-b984-5b07dd2253b5', 'F84080'),
('aa46c669-4caa-44f3-99db-9623607de191', 'F84060'),
('aa6456c8-bcac-47ca-9e78-d0a304ee2258', 'F86626'),
('aba50c10-57ea-4d18-9868-abb7d7783a3f', 'F86621'),
('abe9f2ed-fab2-4ce7-9219-12e0ed63da2e', 'F84735'),
('adf11659-3572-4d23-bea7-83ef694afa41', 'G85119'),
('af79fb51-dd6f-4c59-8df7-d845c6b8bb0b', 'F84670'),
('b58db401-0355-4f42-8590-d4b06c4eff49', 'F84044'),
('b5a08769-cbbe-4093-93d6-b696cd1da483', 'R1H'),
('b5a9c770-afd5-4caa-8b1a-b054fbe4855f', 'F84105'),
('b67f25bf-c7c6-48a8-b029-b56b7d7a99bc', 'F84714'),
('b7cfae7d-7e47-4298-bdec-a96b1494e442', 'F84724'),
('b9157f1e-d9b5-407c-a276-1269e7d957ac', 'F84692'),
('b992a628-bca0-45f7-8b5d-a9b8d55d1caa', 'F84096'),
('bde3e5dd-56cf-4a81-af2c-4efe865d7aee', 'F84086'),
('be3b7eb4-e978-4014-95fb-191127ba88c9', 'F86006'),
('bf1b8be2-cccb-4d85-b5eb-ea7b15bad0cb', 'F84661'),
('bf6588d0-c676-4721-aa14-85cc3b32b4ff', 'F84036'),
('c142f336-2f67-4f9f-807b-99d65714c286', 'G85715'),
('c45ccafd-f86a-4778-845a-96269cad6c3d', 'F84062'),
('c4eeb887-b640-4b17-80e8-294e5d2a731c', 'F84097'),
('cce715c2-be4b-4186-9128-99aba272f874', 'F84034'),
('ce566556-50d7-40cc-a6e1-8e2dc3ca9156', 'F84733'),
('cf0b1951-3574-4dfa-8fd5-a0470c47b014', 'F84656'),
('cfad5096-7678-4b60-a08d-ab8312028cc6', 'F84030'),
('d14f4db4-553c-46f0-84fa-482bac27f73a', 'F84666'),
('d27abefc-95de-4ec7-a974-0b2232553f85', 'F84641'),
('d3a3f02c-805f-4c5e-b92d-d6b8234013ec', 'F84698'),
('d5699eaf-6feb-4547-9c16-d822fd235391', 'F84010'),
('d787df8a-e4ce-431f-88ec-5c96e1ee4081', 'ELCEG'),
('d84818a3-6b1c-436d-aaf2-ee9d6858c1da', 'F86058'),
('d900b5c4-eefa-4d0d-997a-f534fd2949ec', 'Y00092'),
('d9f46e4c-7095-4862-869d-95bc7ce599a0', 'F84702'),
('da43bc63-0dc3-42c2-95ef-5a0564cec000', 'F84022'),
('db1ad2ef-80b8-4788-af57-d056241f019a', 'F84008'),
('dc09972c-1a3f-4fb9-bb90-25be7ddda370', 'F84679'),
('df0c7f1d-54d9-4939-b7d3-6841a3500308', 'F86005'),
('df3ba8e3-c948-4e30-8d08-98b8277f81dd', 'F84123'),
('df7d5d48-ff05-4faf-a04e-5131447d1e84', '16456'),
('e0803146-0418-49fa-b71d-6be7f699c4d5', 'F86696'),
('e3ef914f-2903-482c-a8b1-ee5b61fc2ba8', 'F84122'),
('e47c942d-73a1-43da-96a1-c14381cade80', 'F86644'),
('e51a0bc4-60e3-4583-a81d-c479818d8d8f', 'F86086'),
('e8736099-aaa6-4ceb-87cc-10f0fbf94139', 'VitruCare'),
('e8ed4498-fca3-4682-bcb4-c42dde44655d', 'F86044'),
('e9632539-ecbc-4f46-9900-6e44cdddde83', 'F84734'),
('e979f54d-205f-4f1c-b2c1-0fc7feade781', 'F84658'),
('e984ae9e-876a-4ad3-9fee-e0ba358b5585', 'F84621'),
('eb6acbf4-2601-4748-8034-f42b8fc96da3', 'F86088'),
('edeff224-3ac2-4e0f-92f2-7848c58e1a10', 'Y03023'),
('f0d18542-9524-47fe-9e79-9adea51ab269', 'F84620'),
('f3a214ed-0fc6-4cc7-bd0a-2c65e6a445b3', 'F86030'),
('f61f207b-deda-4479-9f7d-47414613f76f', 'F84673'),
('f7443204-6833-49a5-b499-63eb48819bca', 'F84051'),
('f979dc85-ca4a-47bc-bfc8-bead44aa0f8e', 'F86616'),
('fa9821d8-02ac-4b1e-8f32-963debd54f81', 'F84081'),
('fb991ade-9e8b-420a-b0e1-78001f3d619f', 'F84708'),
('fd5e9c43-337a-45ee-be15-fc99914a492f', 'Y00212'),
('ff51a1d3-b9b1-43ae-8ba0-bcd151109fc9', 'F84033');



update data_sharing_manager.dds_dsa_map map 
join data_sharing_manager.organisation o on o.ods_code = map.ods_code
set dsm_uuid = o.uuid;

alter table data_sharing_manager.address
drop foreign key address_ibfk_1;

update data_sharing_manager.organisation o
join data_sharing_manager.dds_dsa_map map on map.dsm_uuid = o.uuid
set o.uuid = map.dds_uuid;

update data_sharing_manager.address a
join data_sharing_manager.dds_dsa_map map on map.dsm_uuid = a.organisation_uuid
set a.organisation_uuid = map.dds_uuid;

update data_sharing_manager.master_mapping m
join data_sharing_manager.dds_dsa_map map on map.dsm_uuid = m.child_uuid
set m.child_uuid = map.dds_uuid;

update data_sharing_manager.master_mapping m
join data_sharing_manager.dds_dsa_map map on map.dsm_uuid = m.parent_uuid
set m.parent_uuid = map.dds_uuid;

alter table data_sharing_manager.address
add foreign key data_sharing_manager_address_organisation_uuid_fk (organisation_uuid) references data_sharing_manager.organisation(uuid) on delete cascade

