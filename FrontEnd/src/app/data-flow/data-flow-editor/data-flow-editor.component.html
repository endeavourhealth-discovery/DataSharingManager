<div class="module">
  <div class="container-fluid">
    <div class="module-heading">
      Data Flow Details
      <div class="pull-right">
        <button type="button" class="btn btn-sm btn-success" (click)="save(false)">Save</button>
        <button type="button" class="btn btn-sm btn-warning" (click)="save(true)">Save & Close</button>
        <button type="button" class="btn btn-sm btn-danger" (click)="close()">Cancel</button>
      </div>
    </div>
    <div class="module-body">
      <form>
        <div class="row">
          <div class="form-group col-md-6">
            <label class="control-label">Data Flow Name</label>
            <input type="text" class="form-control" placeholder="Data flow name" [(ngModel)]="dataFlow.name" name="name">
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-3">
            <label class="control-label">Direction</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.directionId" name="directionId">
                <option *ngFor="let direction of flowDirections" [ngValue]="direction.num">{{direction.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="control-label">Flow Schedule</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.flowScheduleId" name="flowScheduleId">
                <option *ngFor="let schedule of flowSchedules" [ngValue]="schedule.num">{{schedule.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="control-label">Data Exchange Method</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.dataExchangeMethodId" name="dataExchangeMethodId">
                <option *ngFor="let method of exchangeMethod" [ngValue]="method.num">{{method.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="control-label">Flow Status</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.flowStatusId" name="flowStatusId">
                <option *ngFor="let status of flowStatus" [ngValue]="status.num">{{status.name}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-3">
            <label class="control-label">Storage Protocol</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.storageProtocolId" name="storageProtocolId">
                <option *ngFor="let sps of storageProtocols" [ngValue]="sps.num">{{sps.name}}</option>
              </select>
            </div>
          </div>

          <div class="form-group col-md-3">
            <label class="control-label">Security Infrastructure</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.securityInfrastructureId" name="securityInfrastructureId">
                <option *ngFor="let sis of securityInfrastructures" [ngValue]="sis.num">{{sis.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="control-label">Storage Protocol</label>
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-th-large fa-lg fa-fw"></i></span>
              <select class="form-control" [(ngModel)]="dataFlow.securityArchitectureId" name="securityArchitectureId">
                <option *ngFor="let sas of securityArchitectures" [ngValue]="sas.num">{{sas.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="control-label">Approximate Volume</label>
            <input type="text" class="form-control" placeholder="Approximate Volume" [(ngModel)]="dataFlow.approximateVolume" name="approximateVolume">
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label class="control-label">Additional Documentation</label>
            <input type="text" class="form-control" placeholder="Additional Documentation" [(ngModel)]="dataFlow.additionalDocumentation" name="additionalDocumentation">
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label class="control-label">Sign Off</label>
            <input type="text" class="form-control" placeholder="Sign Off" [(ngModel)]="dataFlow.signOff" name="signOff">
          </div>
        </div>

        <accordion>
          <accordion-group [panelClass]="accordionClass" #datashare>
            <div accordion-heading>
              <div class="row">
                <div class="col-md-2">
                  Data Sharing Agreements
                </div>
                <div class="col-md-1">
                  <span class="badge">{{dsas?.length}}</span>
                  <i class=" float-xs-right glyphicon pull-right"
                     [ngClass]="{'glyphicon-chevron-down': datashare?.isOpen, 'glyphicon-chevron-right': !datashare?.isOpen}"></i>
                  <button type="button" class="btn btn-xs btn-success pull-right" (click)="editDataSharingAgreements()">Edit</button>

                </div>
              </div>
            </div>
            <entity-viewer
              [items]="dsas"
              [primary]="'name'"
              [primaryOrderText]="'Name'"
              [displayClass]="'region'"
              [secondary]="'description'"
              [secondaryOrderText]="'Description'"
              [typeDescription]="'Data Sharing Agreement'"
              [model]="'dsa'"
              [detailsToShow]="dsaDetailsToShow">
            </entity-viewer>
          </accordion-group>
          <accordion-group [panelClass]="accordionClass" #dataproc>
            <div accordion-heading>
              <div class="row">
                <div class="col-md-2">
                  Data Processing Agreements
                </div>
                <div class="col-md-1">
                  <span class="badge">{{dpas?.length}}</span>
                  <i class="float-xs-right glyphicon pull-right"
                     [ngClass]="{'glyphicon-chevron-down': dataproc?.isOpen, 'glyphicon-chevron-right': !dataproc?.isOpen}"></i>
                  <button type="button" class="btn btn-xs btn-success pull-right" (click)="editDataProcessingAgreements()">Edit</button>
                </div>
              </div>
            </div>
            <entity-viewer
              [items]="dpas"
              [primary]="'name'"
              [primaryOrderText]="'Name'"
              [displayClass]="'region'"
              [secondary]="'description'"
              [secondaryOrderText]="'Description'"
              [typeDescription]="'Data Processing Agreement'"
              [model]="'dpa'"
              [detailsToShow]="dpaflowDetailsToShow">
            </entity-viewer>
          </accordion-group>
        </accordion>
      </form>
      <br>
      <br>
    </div>
  </div>
</div>
